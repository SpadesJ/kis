(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["LiquidityPool"],{2785:function(e,t,o){},5018:function(e,t,o){},"6b12":function(e,t,o){"use strict";o("5018")},"6bba":function(e,t,o){"use strict";o("2785")},"8d94":function(e,t,o){"use strict";o.r(t);o("99af"),o("a9e3"),o("b680");var n=o("7a23"),c=o("e34e"),i=o.n(c),a=o("e85e"),l=o.n(a),r=Object(n["withScopeId"])("data-v-75a8875e");Object(n["pushScopeId"])("data-v-75a8875e");var d={class:"page"},s={class:"top-text"},u={class:"pool-block flex-wrap"},p={class:"pool-box"},b={class:"tit"},f={key:0,class:"cont"},m={key:0,src:i.a,alt:"",class:"icon-lock"},k={key:1,src:l.a,alt:"",class:"icon-lock"},O={class:"btns flex-center"},A={class:"pool-box"},g={key:0,class:"tit"},j={key:1,class:"tit"},y={key:2,class:"cont"},h={key:0,src:i.a,alt:"",class:"icon-lock"},w={key:1,src:l.a,alt:"",class:"icon-lock"},I={class:"btns flex-center"},v={class:"dialog-box"},D={class:"input-block flex-center"},x={class:"coin-style"},V={class:"input-msg"},M={class:"btns-group flex-center"},B={class:"dialog-box"},E={class:"input-block flex-center"},N={class:"coin-style"},S={class:"input-msg"},C={class:"btns-group flex-center"};Object(n["popScopeId"])();var F=r((function(e,t,o,c,i,a){var l=Object(n["resolveComponent"])("index-top"),F=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createBlock"])("div",d,[Object(n["createVNode"])(l,{h1:"KISwap",h4:e.$t("index.最具潜力的集DEX、IKO、DAO、聚合交易为一体的DEFI生态平台")},null,8,["h4"]),Object(n["createVNode"])("div",s,Object(n["toDisplayString"])(e.$t("liquidity.注意:我们现在只支持Heco，不要转移ETHEREUM mainnet令牌")),1),Object(n["createVNode"])("div",u,[Object(n["withDirectives"])(Object(n["createVNode"])("div",p,[Object(n["createVNode"])("div",b,Object(n["toDisplayString"])(e.$t("liquidity.未领取奖励"))+"(KIS)",1),e.address?(Object(n["openBlock"])(),Object(n["createBlock"])("div",f,Object(n["toDisplayString"])(e.userInfo.canWithdraw),1)):(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:1},["light"===e.themeMode?(Object(n["openBlock"])(),Object(n["createBlock"])("img",m)):(Object(n["openBlock"])(),Object(n["createBlock"])("img",k))],64)),Object(n["createVNode"])("div",O,[Object(n["createVNode"])("div",{onClick:t[1]||(t[1]=function(){return e.withdrawMdx&&e.withdrawMdx.apply(e,arguments)}),class:["btn flex-item",{disabled:!e.address}]},Object(n["toDisplayString"])(e.$t("liquidity.收取奖励")),3)])],512),[[n["vShow"],!e.addDialogVisible&&!e.minsDialogVisible]]),Object(n["withDirectives"])(Object(n["createVNode"])("div",A,[e.address?(Object(n["openBlock"])(),Object(n["createBlock"])("div",j,Object(n["toDisplayString"])(e.$t("liquidity.已质押"))+"("+Object(n["toDisplayString"])(e.poolInfo.tokenSymbol)+")",1)):(Object(n["openBlock"])(),Object(n["createBlock"])("div",g,Object(n["toDisplayString"])(e.$t("liquidity.KISwap流动性质押"))+"("+Object(n["toDisplayString"])(e.poolInfo.tokenSymbol)+")",1)),e.address?(Object(n["openBlock"])(),Object(n["createBlock"])("div",y,Object(n["toDisplayString"])(Number(e.userInfo.amount).toFixed(6)),1)):(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:3},["light"===e.themeMode?(Object(n["openBlock"])(),Object(n["createBlock"])("img",h)):(Object(n["openBlock"])(),Object(n["createBlock"])("img",w))],64)),Object(n["createVNode"])("div",I,[e.address?Number(e.tokenAllowance)?(Object(n["openBlock"])(),Object(n["createBlock"])(n["Fragment"],{key:2},[Object(n["createVNode"])("div",{class:"btn handle-btn flex-center",onClick:t[4]||(t[4]=function(t){return e.addDialogVisible=!0})},Object(n["toDisplayString"])(e.$t("pool.质押")),1),Object(n["createVNode"])("div",{class:"btn handle-btn flex-center",onClick:t[5]||(t[5]=function(t){return e.minsDialogVisible=!0})},Object(n["toDisplayString"])(e.$t("pool.解锁")),1)],64)):(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:1,class:"btn flex-item",onClick:t[3]||(t[3]=function(){return e.approveToken&&e.approveToken.apply(e,arguments)})},Object(n["toDisplayString"])(e.$t("liquidity.授权",{symbol:e.poolInfo.tokenSymbol})),1)):(Object(n["openBlock"])(),Object(n["createBlock"])("div",{key:0,class:"btn flex-item",onClick:t[2]||(t[2]=function(){return e.initWallet&&e.initWallet.apply(e,arguments)})},Object(n["toDisplayString"])(e.$t("liquidity.链接钱包")),1))])],512),[[n["vShow"],!e.addDialogVisible&&!e.minsDialogVisible]])]),Object(n["createVNode"])(F,{"custom-class":"pool-dialog",title:"".concat(e.$t("pool.质押")," ").concat(e.poolInfo.tokenSymbol," Tokens"),modelValue:e.addDialogVisible,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.addDialogVisible=t})},{default:r((function(){return[Object(n["createVNode"])("div",v,[Object(n["createVNode"])("div",D,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.addAmount=t}),class:"input-style flex-item",placeholder:e.$t("liquidity.请输入数量")},null,8,["placeholder"]),[[n["vModelText"],e.addAmount]]),Object(n["createVNode"])("div",x,Object(n["toDisplayString"])(e.poolInfo.tokenSymbol),1),Object(n["createVNode"])("div",{class:"btn-style",onClick:t[7]||(t[7]=function(t){return e.addAmount=e.userInfo.tokenBlance})},Object(n["toDisplayString"])(e.$t("liquidity.最大值")),1)]),Object(n["createVNode"])("div",V,Object(n["toDisplayString"])(e.userInfo.tokenBlance)+Object(n["toDisplayString"])(e.poolInfo.tokenSymbol)+Object(n["toDisplayString"])(e.$t("liquidity.可用")),1),Object(n["createVNode"])("div",M,[Object(n["createVNode"])("div",{class:"btn flex-item",onClick:t[8]||(t[8]=function(){return e.deposit&&e.deposit.apply(e,arguments)})},Object(n["toDisplayString"])(e.$t("pool.质押")),1),Object(n["createVNode"])("div",{class:"btn flex-item",onClick:t[9]||(t[9]=function(t){return e.addDialogVisible=!1})},Object(n["toDisplayString"])(e.$t("liquidity.取消")),1)])])]})),_:1},8,["title","modelValue"]),Object(n["createVNode"])(F,{"custom-class":"pool-dialog",title:"".concat(e.$t("pool.解押")," ").concat(e.poolInfo.tokenSymbol," Tokens"),modelValue:e.minsDialogVisible,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.minsDialogVisible=t})},{default:r((function(){return[Object(n["createVNode"])("div",B,[Object(n["createVNode"])("div",E,[Object(n["withDirectives"])(Object(n["createVNode"])("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=function(t){return e.reduceAmount=t}),class:"input-style flex-item",placeholder:e.$t("liquidity.请输入数量")},null,8,["placeholder"]),[[n["vModelText"],e.reduceAmount]]),Object(n["createVNode"])("div",N,Object(n["toDisplayString"])(e.poolInfo.tokenSymbol),1),Object(n["createVNode"])("div",{class:"btn-style",onClick:t[12]||(t[12]=function(t){return e.reduceAmount=e.userInfo.amount})},Object(n["toDisplayString"])(e.$t("liquidity.最大值")),1)]),Object(n["createVNode"])("div",S,Object(n["toDisplayString"])(e.userInfo.amount)+Object(n["toDisplayString"])(e.poolInfo.tokenSymbol)+Object(n["toDisplayString"])(e.$t("liquidity.可用")),1),Object(n["createVNode"])("div",C,[Object(n["createVNode"])("div",{class:"btn flex-item",onClick:t[13]||(t[13]=function(){return e.withdraw&&e.withdraw.apply(e,arguments)})},Object(n["toDisplayString"])(e.$t("pool.解押")),1),Object(n["createVNode"])("div",{class:"btn flex-item",onClick:t[14]||(t[14]=function(t){return e.minsDialogVisible=!1})},Object(n["toDisplayString"])(e.$t("liquidity.取消")),1)])])]})),_:1},8,["title","modelValue"])])})),H=(o("4de4"),o("5530")),q=(o("96cf"),o("1da1")),U=o("4187"),K=o("a93e"),G=o("6c02"),R=o("5502"),T=o("9d56"),J=o("ee10"),P=o("d8e1"),W=o("722f"),Q=o("901e"),L=o.n(Q),z=o("3fd4"),Y=o("01ea"),Z=o("47e2"),$={components:{IndexTop:U["a"]},setup:function(){var e=Object(G["c"])(),t=Object(R["b"])(),o=Object(Z["b"])(),c=o.t,i=Object(n["reactive"])({$t:c,addDialogVisible:!1,minsDialogVisible:!1,themeMode:Object(n["computed"])((function(){return t.state.themeMode})),poolAddress:Y["a"].poolAddress,tokenAllowance:0,address:Object(n["computed"])((function(){return t.state.accounts[0]})),poolPairList:K["a"],web3:Object(n["computed"])((function(){return t.state.provider})),poolContract:null,tokenContract:null,totalAllocPoint:0,addAmount:"",reduceAmount:"",poolData:{totalAmount:0,allocPoint:0,lastRewardBlock:0},userInfo:{rewardDebt:0,amount:0,canWithdraw:0,tokenBlance:0},pid:Number(e.params.pid),poolInfo:Object(n["computed"])((function(){var e=i.poolPairList.filter((function(e){return e.pid==i.pid}));return e.length?e[0]:{}})),initWallet:function(){J["a"].initWeb3()},initData:function(){i.poolContract=new i.web3.eth.Contract(P,i.poolAddress),i.tokenContract=new i.web3.eth.Contract(W,i.poolInfo.lpAddresses),i.initInfo()},initInfo:function(){i.getTokenAllowance(),i.getPoolInfo(),i.getUserInfo(),i.getPendingMdx(),i.getTokenBlance()},getTokenAllowance:function(){i.tokenContract.methods.allowance(i.address,i.poolAddress).call().then((function(e){i.tokenAllowance=e}))},approveToken:function(){i.tokenContract.methods.approve(i.poolAddress,T["a"]).send({from:i.address}).then((function(e){i.getTokenAllowance()}))},getPendingMdx:function(){i.poolContract.methods.pending(i.poolInfo.pid,i.address).call().then((function(e){console.log(i.web3.utils),i.userInfo.canWithdraw=Number(e["0"]/Math.pow(10,18)).toFixed(6)}))},getPoolInfo:function(){i.poolContract.methods.poolInfo(i.poolInfo.pid).call().then(function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.poolData.allocPoint=t.allocPoint,i.poolData.totalAmount=t.totalAmount,i.poolData.lastRewardBlock=t.lastRewardBlock;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getUserInfo:function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.tokenContract.methods.decimals().call();case 2:t=e.sent,i.poolContract.methods.userInfo(i.poolInfo.pid,i.address).call().then((function(e){i.userInfo.rewardDebt=e.rewardDebt,i.userInfo.amount=new L.a(e.amount).dividedBy(Math.pow(10,t)).toFixed(Number(t))}));case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getTokenBlance:function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.tokenContract.methods.balanceOf(i.address).call();case 2:return t=e.sent,e.next=5,i.tokenContract.methods.decimals().call();case 5:o=e.sent,console.log(t,o),i.userInfo.tokenBlance=new L.a(t).dividedBy(Math.pow(10,o)).toFixed(Number(o));case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),deposit:function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(Number(i.userInfo.tokenBlance)>0&&Number(i.userInfo.tokenBlance)>=Number(i.addAmount))){e.next=9;break}return i.addDialogVisible=!1,e.next=4,i.tokenContract.methods.decimals().call();case 4:t=e.sent,o=new L.a(i.addAmount).multipliedBy(Math.pow(10,t)).toFixed(),i.poolContract.methods.deposit(i.poolInfo.pid,o).send({from:i.address}).then((function(e){i.initInfo()})),e.next=10;break;case 9:z["a"].error(i.$t("liquidity.数量不足"));case 10:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),withdraw:function(){var e=Object(q["a"])(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(Number(i.userInfo.amount)>0&&Number(i.userInfo.amount)>=Number(i.reduceAmount))){e.next=9;break}return i.minsDialogVisible=!1,e.next=4,i.tokenContract.methods.decimals().call();case 4:t=e.sent,o=new L.a(i.reduceAmount).multipliedBy(Math.pow(10,t)).toFixed(),i.poolContract.methods.withdraw(i.poolInfo.pid,o).send({from:i.address}).then((function(e){i.initInfo()})),e.next=10;break;case 9:z["a"].error(i.$t("liquidity.数量不足"));case 10:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),withdrawMdx:function(){i.poolContract.methods.deposit(i.poolInfo.pid,"0").send({from:i.address}).then((function(e){i.initInfo()}))}});i.address&&i.initData(),Object(n["watch"])((function(){return i.address}),(function(e){e&&i.initData()}));var a=Object(n["toRefs"])(i);return Object(H["a"])({},a)}};o("6bba"),o("6b12");$.render=F,$.__scopeId="data-v-75a8875e";t["default"]=$},"99af":function(e,t,o){"use strict";var n=o("23e7"),c=o("d039"),i=o("e8b5"),a=o("861d"),l=o("7b0b"),r=o("50c4"),d=o("8418"),s=o("65f0"),u=o("1dde"),p=o("b622"),b=o("2d00"),f=p("isConcatSpreadable"),m=9007199254740991,k="Maximum allowed index exceeded",O=b>=51||!c((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),A=u("concat"),g=function(e){if(!a(e))return!1;var t=e[f];return void 0!==t?!!t:i(e)},j=!O||!A;n({target:"Array",proto:!0,forced:j},{concat:function(e){var t,o,n,c,i,a=l(this),u=s(a,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(i=-1===t?a:arguments[t],g(i)){if(c=r(i.length),p+c>m)throw TypeError(k);for(o=0;o<c;o++,p++)o in i&&d(u,p,i[o])}else{if(p>=m)throw TypeError(k);d(u,p++,i)}return u.length=p,u}})},e34e:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABKCAMAAAArDjJDAAAAV1BMVEUAAAA6c0M7c0E5c0M6c0M6dEM5ckI6c0M4cUAybjw5c0I3ckA5c0I6c0I5ckI4ckI5cUEAZwA5c0M4ckI5ckI5c0I5c0I5c0I6c0I5ckM5ckI4ckI6c0OKbxpVAAAAHHRSTlMA1FL3tKs86CUJ7hmTvIZkMAKLNMHazcedgFdxIufE3gAAAUNJREFUWMPtltuygyAMRaUoKOCtWm/N/3/nUWh5KA5jxNPpA+sxe1wToiNJIpGjFIsaOQUxTEsRJMonChY65ec7UkZkoao42RIBh8epxhoBO4jmRE8cdhHovgp7urRupGzqFF4Q7LwqMJS5bbMEQ4UzSfp6rE0s7QwaKlGqO2juTqumiqA1Mx/bj/Koy7xFqDrQsM86s/XDPM27cgOigydCpexMdmeoEKoMNmo3qHWQoVWLG9x0kKJVt6iKqp9TSTWQFQEbnDhwHQiyMiiJuRv88NyjSgGB/6AUUFCPCpBE1T+qyqoqL1E9Gr0iPcJVQppIimDV/M7mYBV7ZyxY1dk9IlhV24s5VGX3xYIEqyArtCm74hPtt6SHUJVds0hUfVnF2Qr/uV9fVF2h+s7O0AOK3qNiFNUUSzx0JT0sKrskEtnnD3xly0cPqH0YAAAAAElFTkSuQmCC"},e85e:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABKCAMAAAArDjJDAAABGlBMVEUAAAAG584G6NEF6tUF7NkE7NsF7NgG7NcE8OED7t8E798F6dED8OMH6M4E7dwG6dIE7NgG6NIF69QH6M4E7dkG6dAF7dwG7dsG6c0D7d0H6dMI6M8G6tQE7d0H6tIF69QF7t0E7dwG7doF7NoH6c4D7t4F7d0G7NcH6c8H6dAH6dAF69UG6dAH6dAF7dkG6tIH6c4H6c8H6dAF69cE798G7dcH6tEH6c8G6dAD8OIC58sH6c8H6M8H6c4G69MH6tIG6dEG6dAH6dAE7NoH6c8H6M4A5csG69QH69MH6tAE798F7t4H6dAH6M4H6MwA580I6M8F7NYE798H6M4H6NAH6dAE7dwA3MoI6M0I6M4E798E7NwF7+II6M7glYsqAAAAXXRSTlMAKSswNUJlR2VKfy9T1TotODc00Ts7WlRSXUDpTk0+Mm5fV0m0YFBE8seFeHeXUbWs2XRoWkbSzKlWGvPBvK2eko2Jem9mCKObfnVpYVskAuy6g/ffw4oO4uGPfHF5OW9cAAAD90lEQVRYw+3XZ3eaYBgG4AZETYlhyCh7BUSIWPfeK0Ztdjrz//9GX2IbMywV/Jr7kz63Xr7gOT7HD+95z675usplhYeHy1pu9XUv6KBnF7r9kaqO+t1Uq3cQGZoO7LwbNzUORDPjbt4eRDzZl1TNNRmmzJkgXJkpm26t8CWKBAv1ONNgzKR6DqImTfAkPhOUCGcSepquc4tRt3rZagnV7mjB6bp2JoQ+1zTd1VhWU/OtkwnabKKTEzuv+pN6ehqScqpxluVGt52Dp2+zczviWDZedcJJTXukW4wrOBeb2cVccBlLd+1mKGp4p3lssjB8ddRCifW09iCMdCE4ulWeZS9ejbOzsqU7wkUIihRK4K5c0q/n9CW4gyWBCEGNs6an36feFumBbpnZYggq1+Us5mSw5R7mGYvr5kJQ9Rl4R3bytlhmwWfM6iGozz3G0tKf3haf0prFnJ2EonRLq26jqpqkh6POWInbTnESmwtLMdsvkAlL5TxD307phheSEiv/oipiPxxlZLztlJcxwlH9hCzWtlE1Ua4MQlEDnk5kt1HZBM07oSiHJvjtFE/Q852oZr+WArHnJEy0v6Xe5JudgclT239Y6zeDd0N76BbHkyWPYoq4LI2LxdOnFIvj0nJFYyi/moyL7rAduDFO8nExI9OEgkIQhpIELfM8knkMwvOgIFEMglAFFBkxng+60JbryTHw6oPHAA1WSAJ/DEEq8PMmJntuK4B6KBk47L98Y5H4MQVyjJO+tKlg3Cg9BFHxRGxDQZAvUTwCwlO+BUEbKpaIh6AwIMmIcShJhwbiW1hkCoVjFCKxZU0rs1KGisFodErBEYlRe/n8mcpICK5Ep2CSMpiZ3XGGHbvHGBQJR6cIhK0XUL9BC3UPIfahKq7QXFfNS7eyB4USYmf+t3PyIoFGp3Dxln5a8gURR/c51Xflb0d+j3wqECxmbFb05M6IYQdRKUhBhqnpupqmHESBolMoLdbq00epnhVpdA8KI5Fluu037fQSIbHolP9TIjppv0k7Ig6aPSiMrMzX1LxCYvtQ4B386Zo65WFoPwqVi2uqKKOgCElhL66QHq+pMf1y/n/KwJXnP7sQRqwEnqZ5YUVgz+eoghvBVOnw+HEd/AkGNpicSxUKqZwM9tZmjsLk8WHwmlhIMg621LMohJxJJDIy8XJK4rK0CKRUD6yD2PMQBE5TFI0TxIsxTiGeGkw1EggPtt6LUNTbCY8kGsHUOScZFWSHVAyJOw+kfiaPLOlwh0jWUfJnEHVzr5rlRuPov2k0yqZ6fxNAta8+/lIXyR2yUH99vLoLoGj76sf19ccdcn3948qmA/8Idm4edkyrQ3x4z3u25zcofrwFzDqDSwAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=LiquidityPool.8f79b69b.js.map